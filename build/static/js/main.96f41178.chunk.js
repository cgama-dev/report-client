(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{290:function(e,t,r){e.exports=r(546)},546:function(e,t,r){"use strict";r.r(t);var a,n=r(0),o=r.n(n),c=r(73),i=r.n(c),s=(r(295),r(34)),l=r(35),p=r(37),u=r(36),d=r(38),m=r(56),h=r(120),E=Object(h.createActions)({getReportRequest:["report"],getReportSuccess:["report"],getReportFailure:null,getReportsRequest:null,getReportsSuccess:["reports"],getReportsFailure:null,createReportRequest:["report"],createReportSuccess:["report"],createReportFailure:null,updateReportRequest:["report"],updateReportSuccess:["report"],updateReportFailure:null,generateReportRequest:["report"],generateReportSuccess:["report"],generateReportFailure:null}),R=E.Types,g=E.Creators,b=r(559),v=r(564),f=r(160),j=r(560),O=r(561),T=r(548),S=r(558),y=r(19),k=r(550),C=r(562),_=r(565),P=r(563),x=r(567),w=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e,t){var a=t.name,n=t.value;return r.setState(Object(y.a)({},a,n))},r.createReport=function(){if(r.state.projectName){var e={projectName:r.state.projectName,url:r.state.projectName};r.props.createReport(e),r.close()}else alert("n\xe3o existe")},r.close=function(){return r.setState({projectName:"",open:!1})},r.handleForm=function(){return o.a.createElement(k.a,{centered:!0,columns:1},o.a.createElement(k.a.Row,{centered:!0,columns:2},o.a.createElement(k.a.Column,null,o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(C.a,null,o.a.createElement(C.a.Field,{required:!0},o.a.createElement("label",null,"Nome"),o.a.createElement(C.a.Input,{required:!0,placeholder:"Informe o nome do projeto",name:"projectName",value:r.projectName,onChange:r.handleChange}))),o.a.createElement("br",null))))},r.state={projectName:"",open:!1},r}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.isRedirect?o.a.createElement(x.a,{to:"/report/".concat(this.props.report._id)}):o.a.createElement("div",null,o.a.createElement(_.a,{inverted:!0,color:"grey",onClick:function(){return e.setState({open:!0})}},o.a.createElement(f.a,{name:"plus circle"})," Criar novo projeto"),o.a.createElement(P.a,{open:this.state.open,size:"small",centered:!1,header:"Cadastre um Projeto",content:this.handleForm(),actions:[o.a.createElement(_.a,{key:0,color:"red",onClick:function(){return e.close()}},o.a.createElement(f.a,{name:"trash"}),"Cancelar"),o.a.createElement(_.a,{key:1,color:"green",onClick:function(){return e.createReport()}},o.a.createElement(f.a,{name:"plus circle"})," Salvar")]}))}}]),t}(n.Component),L=Object(m.b)(function(e){return console.log(e),{report:e.reports.report,isLoading:e.reports.isLoading,isRedirect:e.reports.isRedirect}},function(e){return{createReport:function(t){return e(g.createReportRequest(t))}}})(w),A=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(T.a,{color:"teal",inverted:!0},o.a.createElement(T.a.Item,{active:!0},"REPORT-PDF "),o.a.createElement(T.a.Menu,{position:"right"},this.props.isLoading&&o.a.createElement(T.a.Item,null,o.a.createElement(S.a,{size:"tiny",active:!0,inline:"centered"}," Carregando...")),o.a.createElement(T.a.Item,null,o.a.createElement(L,null)))))}}]),t}(n.Component),U=function(e){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("p",{style:{paddingBottom:"32%"}})),o.a.createElement(T.a,{inverted:!0,color:"teal",borderless:!0,style:{flexShrink:0,borderRadius:0,margin:0}},o.a.createElement(T.a.Item,{header:!0},o.a.createElement("a",{href:"https://github.com/cgama-dev/app-report",target:"_blank"}," ",o.a.createElement(f.a,{name:"github"}),"  C\xf3digo Fonte"))))},I=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).handleProjects=function(e){return r.props.reports.map(function(e){return o.a.createElement(v.a.Item,{key:e._id,as:b.a,to:"/report/".concat(e._id)},o.a.createElement(v.a.Content,null,o.a.createElement(f.a,{name:"file alternate outline",size:"huge"}),o.a.createElement(v.a.Header,{as:"span"}," ",o.a.createElement("h1",null,e.projectName))))})},r}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loadDataRequest()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(A,{isLoading:this.props.isLoading}),o.a.createElement("br",null),o.a.createElement("h1",{align:"center"}," Todos os Projetos "),o.a.createElement(j.a,null),o.a.createElement(O.a,null,!this.props.isLoading&&o.a.createElement(v.a,{horizontal:!0,relaxed:"very"},this.handleProjects(this.props.projects))),o.a.createElement(U,null))}}]),t}(n.Component),F=Object(m.b)(function(e){return{reports:e.reports.data,isLoading:e.reports.isLoading}},function(e){return{loadDataRequest:function(){return e(g.getReportsRequest())}}})(I),N=r(568),q=r(566),G=r(23),D=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(T.a,{color:"teal",inverted:!0},o.a.createElement(T.a.Item,{as:b.a,to:"/",active:!0},"REPORT-PDF"),o.a.createElement(T.a.Item,{onClick:function(){return e.props.generateReport()}}," ",o.a.createElement(f.a,{name:"play"})," Executar"),o.a.createElement(T.a.Item,{onClick:function(){return e.props.updateReport()}}," ",o.a.createElement(f.a,{name:"save"})," Salvar"),o.a.createElement(T.a.Menu,{position:"right"},this.props.isLoading&&o.a.createElement(T.a.Item,null,o.a.createElement(S.a,{size:"tiny",active:!0,inline:"centered"}," Carregando...")),o.a.createElement(T.a.Item,null,o.a.createElement(L,null)))))}}]),t}(n.Component),Q=r(278),z=r.n(Q),B=(r(517),r(518),r(520),r(523),r(571)),M=r(549),H=r(569),W=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(p.a)(this,Object(u.a)(t).call(this,e))).handleChangeReportTabs=function(e){return function(t){var a=Object(G.a)({},r.state.report);a[e]=t,r.setState({report:a})}},r.updateReport=function(){var e=Object(G.a)({},r.state.report,{reportId:r.props.match.params.projectid});r.props.updateReport(e)},r.generateReport=function(){var e=Object(G.a)({},r.state.report,{reportId:r.props.match.params.projectid});r.props.generateReport(e),r.setState({loading:!0})},r.AceEditorType=function(e,t){return o.a.createElement(z.a,{width:"100%",mode:e,theme:"twilight",name:t,onChange:r.handleChangeReportTabs("".concat(t)),fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:r.state.report[t],setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}})},r.state={report:{page:"",helpers:"",data:"",header:"",footer:""}},r}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getReport(this.props.match.params.projectid)}},{key:"componentDidUpdate",value:function(e){this.props.match.params.projectid!==e.match.params.projectid&&this.props.getReport(this.props.match.params.projectid)}},{key:"componentWillReceiveProps",value:function(e){var t={page:e.page,helpers:e.helpers,data:e.data,header:e.header,footer:e.footer};this.setState({report:t})}},{key:"render",value:function(){var e=this,t=[{menuItem:{key:"page",icon:"html5",content:"Page"},render:function(){return o.a.createElement(B.a.Pane,null,e.AceEditorType("html","page"))}},{menuItem:{key:"helper",icon:"js",content:"Helper"},render:function(){return o.a.createElement(B.a.Pane,null,e.AceEditorType("javascript","helpers"))}},{menuItem:{key:"data",icon:"js",content:"Data"},render:function(){return o.a.createElement(B.a.Pane,null,e.AceEditorType("json","data"))}},{menuItem:{key:"header",icon:"html5",content:"Header"},render:function(){return o.a.createElement(B.a.Pane,null,e.AceEditorType("html","header"))}},{menuItem:{key:"footer",icon:"html5",content:"Footer"},render:function(){return o.a.createElement(B.a.Pane,null,e.AceEditorType("html","footer"))}}],r={height:"800px"};return o.a.createElement("div",null,o.a.createElement(D,{isLoading:this.props.isLoading,generateReport:this.generateReport,updateReport:this.updateReport}),o.a.createElement(O.a,{style:{width:"95%"}},o.a.createElement(k.a,{stackable:!0},o.a.createElement(k.a.Row,null,o.a.createElement(k.a.Column,{width:8,verticalAlign:"middle",style:r},o.a.createElement(B.a,{panes:t})),o.a.createElement(k.a.Column,{centered:!0,width:8},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(M.a,null,o.a.createElement(_.a,{floated:"right"},"Pr\xe9 - Visualizar"),o.a.createElement(j.a,{clearing:!0}),this.props.isReport&&o.a.createElement(k.a,null,o.a.createElement(k.a.Column,{style:r},o.a.createElement("object",{data:this.props.isReport,width:"98%",height:"750px",type:"application/pdf"}))),!this.props.isReport&&o.a.createElement(k.a,{centered:!0,columns:3},o.a.createElement(k.a.Column,{style:r},o.a.createElement(f.a,{name:"file pdf outline",loading:this.props.isRendering,size:"massive"}),o.a.createElement(H.a,{as:"h1"},"Sem resultado")))))))))}}]),t}(n.Component),J=Object(m.b)(function(e){var t=e.reports.report;return{data:t.data,header:t.header,footer:t.footer,helpers:t.helpers,page:t.page,isLoading:e.reports.isLoading,isReport:e.reports.isReport,isRendering:e.reports.isRendering}},function(e){return{getReport:function(t){return e(g.getReportRequest(t))},updateReport:function(t){return e(g.updateReportRequest(t))},generateReport:function(t){return e(g.generateReportRequest(t))}}})(W),V=r(65),$={data:[],report:{},isLoading:!1,isRedirect:!1,isReport:!1,isRendering:!1,error:!1},K=(a={},Object(y.a)(a,R.GET_REPORT_REQUEST,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;arguments.length>1&&arguments[1];return Object(G.a)({},e,{isLoading:!0,isRedirect:!1})}),Object(y.a)(a,R.GET_REPORT_SUCCESS,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return Object(G.a)({},e,{report:t.report,isLoading:!1})}),Object(y.a)(a,R.GET_REPORT_FAILURE,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;arguments.length>1&&arguments[1];return Object(G.a)({},e,{error:!0})}),Object(y.a)(a,R.GET_REPORTS_REQUEST,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;arguments.length>1&&arguments[1];return Object(G.a)({},e,{isLoading:!0,isReport:!1})}),Object(y.a)(a,R.GET_REPORTS_SUCCESS,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return Object(G.a)({},e,{data:t.reports,isLoading:!1})}),Object(y.a)(a,R.GET_REPORTS_FAILURE,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;arguments.length>1&&arguments[1];return Object(G.a)({},e,{error:!0})}),Object(y.a)(a,R.CREATE_REPORT_REQUEST,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;arguments.length>1&&arguments[1];return Object(G.a)({},e,{isLoading:!0,isRendering:!1,isRedirect:!1,isReport:!1})}),Object(y.a)(a,R.CREATE_REPORT_SUCCESS,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return Object(G.a)({},e,{report:t.report,isLoading:!1,isRedirect:!0,isRendering:!1,isReport:!1})}),Object(y.a)(a,R.CREATE_REPORT_FAILURE,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;arguments.length>1&&arguments[1];return Object(G.a)({},e,{error:!0})}),Object(y.a)(a,R.UPDATE_REPORT_REQUEST,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return Object(G.a)({},e,{report:t.report,isLoading:!0,isRedirect:!1})}),Object(y.a)(a,R.UPDATE_REPORT_SUCCESS,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return Object(G.a)({},e,{report:t.report,isLoading:!1,isRendering:!1})}),Object(y.a)(a,R.UPDATE_REPORT_FAILURE,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;arguments.length>1&&arguments[1];return Object(G.a)({},e,{error:!0})}),Object(y.a)(a,R.GENERATE_REPORT_REQUEST,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return Object(G.a)({},e,{report:t.report,isLoading:!0,isRendering:!0,isRedirect:!1})}),Object(y.a)(a,R.GENERATE_REPORT_SUCCESS,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;return console.log(t),Object(G.a)({},e,{isReport:t.report,isLoading:!1,isRendering:!1})}),Object(y.a)(a,R.GENERATE_REPORT_FAILURE,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;arguments.length>1&&arguments[1];return Object(G.a)({},e,{error:!0})}),a),X=Object(h.createReducer)($,K),Y=Object(V.c)({reports:X}),Z=r(280),ee=r(32),te=r.n(ee),re=r(20),ae=r(77),ne=r.n(ae),oe=te.a.mark(pe),ce=te.a.mark(ue),ie=te.a.mark(de),se=te.a.mark(me),le=te.a.mark(he);function pe(e){var t,r;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=e.report,a.next=4,ne.a.get("https://infinite-basin-82984.herokuapp.com/reports/"+t);case 4:return r=a.sent,a.next=7,Object(re.a)(g.getReportSuccess(r.data));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(re.a)(g.getReportFailure());case 13:case"end":return a.stop()}},oe,this,[[0,9]])}function ue(){var e;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.a.get("https://infinite-basin-82984.herokuapp.com/reports");case 3:return e=t.sent,t.next=6,Object(re.a)(g.getReportsSuccess(e.data.reports));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(re.a)(g.getReportsFailure());case 12:case"end":return t.stop()}},ce,this,[[0,8]])}function de(e){var t,r;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.report,a.prev=1,a.next=4,ne.a.post("https://infinite-basin-82984.herokuapp.com/reports",t);case 4:return r=a.sent,a.next=7,Object(re.a)(g.createReportSuccess(r.data));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(1),a.next=13,Object(re.a)(g.createReportFailure());case 13:case"end":return a.stop()}},ie,this,[[1,9]])}function me(e){var t,r,a;return te.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.report.reportId,r=e.report,n.next=5,ne.a.put("https://infinite-basin-82984.herokuapp.com/reports/"+t,r);case 5:return a=n.sent,n.next=8,Object(re.a)(g.updateReportSuccess(a.data));case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(re.a)(g.updateReportFailure());case 14:case"end":return n.stop()}},se,this,[[0,10]])}function he(e){var t,r,a,n;return te.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t=e.report,o.next=4,ne.a.post("https://infinite-basin-82984.herokuapp.com/reports/report/generate",t,{responseType:"arraybuffer",headers:{Accept:"application/pdf"}});case 4:return r=o.sent,a=new Blob([r.data],{type:"application/pdf"}),n=URL.createObjectURL(a),o.next=9,Object(re.a)(g.generateReportSuccess(n));case 9:o.next=15;break;case 11:return o.prev=11,o.t0=o.catch(0),o.next=15,Object(re.a)(g.updateReportFailure());case 15:case"end":return o.stop()}},le,this,[[0,11]])}var Ee=te.a.mark(Re);function Re(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.b)(R.GET_REPORTS_REQUEST,ue);case 2:return e.next=4,Object(re.b)(R.GET_REPORT_REQUEST,pe);case 4:return e.next=6,Object(re.b)(R.CREATE_REPORT_REQUEST,de);case 6:return e.next=8,Object(re.b)(R.UPDATE_REPORT_REQUEST,me);case 8:return e.next=10,Object(re.b)(R.GENERATE_REPORT_REQUEST,he);case 10:case"end":return e.stop()}},Ee,this)}var ge=Object(Z.a)(),be=Object(V.d)(Y,Object(V.a)(ge));ge.run(Re);var ve=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(m.a,{store:be},o.a.createElement(N.a,null,o.a.createElement("div",null,o.a.createElement(q.a,{exact:!0,path:"/",component:F}),o.a.createElement(q.a,{exact:!0,path:"/report/:projectid",component:J}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[290,2,1]]]);
//# sourceMappingURL=main.96f41178.chunk.js.map